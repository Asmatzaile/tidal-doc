<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.99d83995a">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tidal Cycles Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tidal Cycles Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Tidal Cycles" href="/opensearch.xml"><title data-react-helmet="true">What is a pattern | Tidal Cycles</title><meta data-react-helmet="true" property="og:url" content="https://doc.tidalcycles.org/docs/advanced/understanding-innards/What_is_a_pattern"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="What is a pattern | Tidal Cycles"><meta data-react-helmet="true" name="description" content="In Tidal, what is a pattern? There are a lot of ways of"><meta data-react-helmet="true" property="og:description" content="In Tidal, what is a pattern? There are a lot of ways of"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://doc.tidalcycles.org/docs/advanced/understanding-innards/What_is_a_pattern"><link data-react-helmet="true" rel="alternate" href="https://doc.tidalcycles.org/docs/advanced/understanding-innards/What_is_a_pattern" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://doc.tidalcycles.org/docs/advanced/understanding-innards/What_is_a_pattern" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.0cdd60da.css">
<link rel="preload" href="/assets/js/styles.ad824e0d.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.4f65afac.js" as="script">
<link rel="preload" href="/assets/js/main.685c6125.js" as="script">
<link rel="preload" href="/assets/js/1.42aaa223.js" as="script">
<link rel="preload" href="/assets/js/2.3f0b43c6.js" as="script">
<link rel="preload" href="/assets/js/3.73f49ddf.js" as="script">
<link rel="preload" href="/assets/js/1be78505.3e2e4c37.js" as="script">
<link rel="preload" href="/assets/js/123.b378e32b.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.dd1aef2f.js" as="script">
<link rel="preload" href="/assets/js/17896441.d5c7064b.js" as="script">
<link rel="preload" href="/assets/js/a9aecce8.f7153c60.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Tidal Cycles</strong></a><a class="navbar__item navbar__link" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/docs/reference/cycles">Reference</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/community">Community</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/advanced/understanding-innards/What_is_a_pattern" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><a href="https://github.com/tidalcycles/Tidal" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/tidal.png" alt="TidalCycles Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Tidal Cycles</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference/cycles">Reference</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community">Community</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/advanced/understanding-innards/What_is_a_pattern" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active">English</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/tidalcycles/Tidal" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Understanding innards</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/advanced/understanding-innards/What_is_a_pattern">What is a pattern</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/understanding-innards/Type_signatures">Type signatures</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/advanced/understanding-innards/Haskell_resources">Haskell resources</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">What is a pattern</h1></header><div class="markdown"><p>In Tidal, what <em>is</em> a pattern? There are a lot of ways of
answering this question. A technical definition is that under the hood,
a pattern is a function from time to events. You give a pattern a start
and end time, and it gives you back the events that are active (in part
or in whole) during that timespan. An event is itself a value with a
start and end time.</p><p>This is mostly hidden when it comes to using Tidal to make music, but
lets have a closer look at the innards of a really simple pattern:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;1 2 3&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The above might look like a string, but Tidal quietly parses it into a
pattern for you (using a hidden function called parseBP_E). We can ask
that pattern for values by casting the string pattern to a Tidal pattern
by appending</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">:: Pattern String</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>to the pattern string. You&#x27;re kind of telling Tidal to treat this string
as a pattern and show you what it sees:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;1 2 3&quot; :: Pattern String</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you run the above, you should see the contents of the first cycle in
the output buffer:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">(0&gt;â…“)|&quot;1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(â…“&gt;â…”)|&quot;2&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">(â…”&gt;1)|&quot;3&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>From that we can see the first event</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>is active for the first third of the cycle, and so on.</p><p>So a pattern is a function from a timespan (also known as an <em>arc</em>), to
values with each have a beginning and end. A function like</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">rev</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>, is therefore a combinator, which takes such a function as input, and
gives a new function as output (with input and output timing
manipulations baked-in, in order to reverse the pattern).</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-pattern-types"></a>The Pattern types<a class="hash-link" href="#the-pattern-types" title="Direct link to heading">#</a></h1><p>That&#x27;s the basics, lets have a look at some code. The core
representation for patterns is in the
<a href="https://github.com/tidalcycles/Tidal/blob/master/src/Sound/Tidal/Pattern.hs" target="_blank" rel="noopener noreferrer">Sound.Tidal.Pattern</a>
module. The core representation is in the ten or so lines at the top.
Lets step through it. Some Haskell knowledge will be helpful here, but
you will hopefully get the gist even without software development
experience.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | Time is rational</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Time = Rational</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The above states that time is rational. This means that rather than
representing time as integers (whole numbers), or as floating point
numbers, Tidal represents time as a ratio of <em>two</em> integers. This means
that for example a third can be represented precisely, as one over
three. Music is of course full of such ratios, and not representing them
as such can cause a great deal of problems.. Basically, this means that
if you add three one-thirds together, you&#x27;ll get a whole. Seems obvious
but not all systems do this!</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | A time arc (start and end)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Arc = (Time, Time)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This is the representation of an arc, or timespan. We like to call this
a time arc rather than a time span, because in Tidal the notion of time
is cyclic. Here the two time values are simply the beginning and end of
an arc.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | The second arc (the part) should be equal to or fit inside the</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- first one (the whole that it&#x27;s a part of).</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Part = (Arc, Arc)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Tidal often needs to represent <em>part</em> of an arc. It does so with two
arcs, the first representing the whole of the part, and the second the
part itself. Often both arcs will be the same, which simply means that
we have a whole that has a single part.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | An event is a value that&#x27;s active during a timespan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Event a = (Part, a)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>An <em>event</em> then, consists of a part, and a value of type</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>. This</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>can stand for <em>any</em> type (but you can only have events of the same type
in any one pattern). For example you can have a pattern of words, of
numbers, of colours or even of other patterns..</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">data State = State {arc :: Arc,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    controls :: ControlMap</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                   }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Since version 1.0.0, Tidal patterns can also respond to changing state
as well as progressing time. So the above represents the entire input to
a Tidal pattern, the current timespan, and the current state of external
controllers (whether MIDI controllers, or other software). What is
interesting is that the current time (the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">arc</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>isn&#x27;t a point in time, but an arc, or timespan. This aligns with the
idea of the psychological &#x27;specious present&#x27; having a duration.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | A function that represents events taking place over time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type Query a = (State -&gt; [Event a])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here is that function from time to events we were talking about earlier.
We simplified a bit - it&#x27;s a function from a timespan plus some
additional state, to events. Notice the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>is carried from the type of the events to the type of the query. This
again shows how a particular pattern can only represent events of the
same type.</p><p>Notice also that a list of events is returned (denoted by the square
brackets). This simply means that tidal supports polyphony - many events
can take place at the same time. Remember though that each event has its
own arc; two events might be returned for the same timespan, but they
may well not start and end at the same time, and might not overlap at
all.</p><p>It may also be that the arc of an event might extend outside the arc in
the query state. This is one case where we get part of an arc back - the
part will be the intersection of the arc of the query and that of the
event.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | Also known as Continuous vs Discrete/Amorphous vs Pulsating etc.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data Nature = Analog | Digital</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            deriving Eq</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>An important feature of Tidal is that you can accurately compose
analogue (continuous) and digital (discrete) patterns together. For
example it can be nice to multiply a discrete pattern of notes by a
continuously varying sinewave. It&#x27;s a bit of a myth that computers can
only represent digital structures, but when it comes to combining
analogue and digital patterns together, it&#x27;s useful to be able to know
which is which, hence the above datatype for doing that.</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- | A datatype that&#x27;s basically a query, plus a hint about whether its events</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- are Analogue or Digital by nature</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data Pattern a = Pattern {nature :: Nature, query :: Query a}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Here finally we arrive at the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Pattern</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>datatype, which simply consists of an either digital or analogue nature,
plus a query for calculating events for a particular timespan.</p><p>The only thing we haven&#x27;t done is define what the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ControlMap</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>type is that we saw earlier. As well as being used to represent
controller state, it&#x27;s part of the definition of one more type, the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ControlPattern</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>, here we go:</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">data Value = VS { svalue :: String }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           | VF { fvalue :: Double }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           | VI { ivalue :: Int }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           deriving (Eq,Ord,Typeable,Data)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;!--T:32--&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type ControlMap = Map.Map String Value</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type ControlPattern = Pattern ControlMap</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>A</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ControlMap</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>is simply a dictionary (or map) for storing some values by name (using a
string). As well as using it for external control values within the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">State</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>datatype, we also use it to make</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ControlPattern</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>s. They are simply patterns of controlmaps, and are used for
representing patterns of synthesiser messages. So for example the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">speed</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>function in</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sound &quot;bd sn&quot; # speed &quot;2 3&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>) turns a pattern of numbers into a pattern of controlmaps, the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sound</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>turns a pattern of words into a pattern of controlmaps, and the</p><div class="mdxCodeBlock_3lFL"><div class="codeBlockContent_hGly Haskell"><div tabindex="0" class="prism-code language-Haskell codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">#</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>composes them together into a new pattern of controlmaps. Feel free to
comment on the discussion page if something is unclear!</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tidalcycles/tidal-doc/tree/main/docs/advanced/understanding-innards/What_is_a_pattern.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-03-07T16:53:46.000Z" class="lastUpdatedDate_1WI_">3/7/2021</time> by <strong>Koji Ishimoto</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/advanced/understanding-innards/Type_signatures"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Type signatures Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">TidalCycles</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community/">Community</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://club.tidalcycles.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discourse</a></li><li class="footer__item"><a href="https://discord.gg/ugFq7KfGnB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://youtube.com/tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li><li class="footer__item"><a href="https://post.lurk.org/@tidalcycles" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mastodon</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/tidalcycles/Tidal" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Creative Commons Attribution ShareAlike</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 TidalCycles. Creative Commons Attribution-ShareAlike</div></div></div></footer></div>
<script src="/assets/js/styles.ad824e0d.js"></script>
<script src="/assets/js/runtime~main.4f65afac.js"></script>
<script src="/assets/js/main.685c6125.js"></script>
<script src="/assets/js/1.42aaa223.js"></script>
<script src="/assets/js/2.3f0b43c6.js"></script>
<script src="/assets/js/3.73f49ddf.js"></script>
<script src="/assets/js/1be78505.3e2e4c37.js"></script>
<script src="/assets/js/123.b378e32b.js"></script>
<script src="/assets/js/935f2afb.dd1aef2f.js"></script>
<script src="/assets/js/17896441.d5c7064b.js"></script>
<script src="/assets/js/a9aecce8.f7153c60.js"></script>
</body>
</html>